<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Guide - Source-to-Target Mapping Platform</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f8f9fa;
            padding: 2rem;
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
        }

        .header {
            background: linear-gradient(135deg, #4a5568, #38a169);
            color: white;
            padding: 2.5rem 2rem;
            border-radius: 12px;
            margin-bottom: 2rem;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0, 51, 102, 0.2);
        }

        .header h1 {
            font-size: 2.2rem;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .header p {
            font-size: 1.15rem;
            opacity: 0.95;
        }

        .section {
            background: white;
            margin: 2rem 0;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
            border-left: 5px solid #4a5568;
        }

        .section h2 {
            color: #4a5568;
            margin-bottom: 1.5rem;
            font-size: 1.8rem;
            border-bottom: 2px solid #38a169;
            padding-bottom: 0.5rem;
        }

        .section h3 {
            color: #4a5568;
            margin: 1.5rem 0 1rem 0;
            font-size: 1.3rem;
        }

        .section p {
            margin-bottom: 1rem;
            color: #555;
        }

        .section ul {
            margin-left: 2rem;
            margin-bottom: 1rem;
        }

        .section ul li {
            margin: 0.5rem 0;
            color: #555;
        }

        .tip-box {
            background: linear-gradient(135deg, #e8f4fd, #d4edda);
            padding: 1.25rem;
            border-radius: 8px;
            margin: 1rem 0;
            border-left: 4px solid #38a169;
        }

        .tip-box strong {
            color: #4a5568;
            font-size: 1.05rem;
        }

        .warning-box {
            background: linear-gradient(135deg, #fff3cd, #ffe8a1);
            padding: 1.25rem;
            border-radius: 8px;
            margin: 1rem 0;
            border-left: 4px solid #ffc107;
        }

        .warning-box strong {
            color: #856404;
            font-size: 1.05rem;
        }

        code {
            background: #f1f1f1;
            padding: 3px 8px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            color: #c7254e;
            font-size: 0.9rem;
        }

        .highlight {
            background: #fff3cd;
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: 500;
        }

        strong {
            color: #4a5568;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }

        table th {
            background: #4a5568;
            color: white;
            padding: 0.75rem;
            text-align: left;
            font-weight: 600;
        }

        table td {
            padding: 0.75rem;
            border-bottom: 1px solid #dee2e6;
        }

        table tr:hover {
            background: #f8f9fa;
        }

        .toc {
            background: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
            margin-bottom: 2rem;
        }

        .toc h2 {
            color: #4a5568;
            margin-bottom: 1rem;
            font-size: 1.5rem;
        }

        .toc ul {
            list-style: none;
            margin-left: 0;
        }

        .toc ul li {
            margin: 0.5rem 0;
        }

        .toc ul li a {
            color: #38a169;
            text-decoration: none;
            font-weight: 500;
        }

        .toc ul li a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìñ User Guide</h1>
            <p>Complete guide to the Source-to-Target Mapping Platform</p>
        </div>

        <div class="toc">
            <h2>üìë Table of Contents</h2>
            <ul>
                <li><a href="#overview">1. Application Overview</a></li>
                <li><a href="#getting-started">2. Getting Started</a></li>
                <li><a href="#introduction-page">3. Introduction Page</a></li>
                <li><a href="#field-mapping">4. Field Mapping</a></li>
                <li><a href="#ai-suggestions">5. AI Mapping Suggestions</a></li>
                <li><a href="#manual-search">6. Manual Search</a></li>
                <li><a href="#templates">7. Templates & Bulk Operations</a></li>
                <li><a href="#best-practices">8. Best Practices</a></li>
                <li><a href="#troubleshooting">9. Troubleshooting</a></li>
            </ul>
        </div>

        <div class="section" id="overview">
            <h2>1. Application Overview</h2>
            <p>The Source-to-Target Mapping Platform helps you map source database fields to target database fields using AI-powered semantic matching. This application is designed for healthcare data migration and integration projects.</p>
            
            <h3>Key Features</h3>
            <ul>
                <li><strong>AI-Powered Suggestions:</strong> Uses vector search and LLM to find the best target field matches</li>
                <li><strong>Multi-Field Mappings:</strong> Combine multiple source fields into a single target field</li>
                <li><strong>Manual Search:</strong> Search the semantic table when you need more control</li>
                <li><strong>Bulk Operations:</strong> Upload/download CSV templates for batch processing</li>
                <li><strong>Administration:</strong> Manage transformations, semantic table, and configuration settings</li>
                <li><strong>Real-time Status:</strong> Monitor database, vector search, and AI model health</li>
            </ul>

            <h3>User Roles</h3>
            <ul>
                <li><strong>User:</strong> Can map fields, view mapped fields, and use AI suggestions</li>
                <li><strong>Admin:</strong> All user permissions plus semantic table management and configuration access</li>
            </ul>
        </div>

        <div class="section" id="getting-started">
            <h2>2. Getting Started</h2>
            
            <h3>Navigation</h3>
            <p>The application has a collapsible sidebar on the left with three main sections:</p>
            <ul>
                <li><strong>‚ò∞ Menu Button:</strong> Click to collapse/expand the sidebar</li>
                <li><strong>üè† Introduction:</strong> System status and quick actions</li>
                <li><strong>üó∫Ô∏è Field Mapping:</strong> Main workspace for mapping fields</li>
                <li><strong>‚öôÔ∏è Configuration:</strong> Admin-only settings (if you're an admin)</li>
            </ul>

            <h3>Header</h3>
            <p>The top header shows:</p>
            <ul>
                <li>Gainwell logo and application title</li>
                <li>Your name and role badge (Admin/User)</li>
            </ul>

            <div class="tip-box">
                <strong>üí° Tip:</strong> Use the hamburger menu (‚ò∞) to collapse the sidebar and get more screen space for your work.
            </div>
        </div>

        <div class="section" id="introduction-page">
            <h2>3. Introduction Page</h2>
            <p>The Introduction page is your dashboard showing system health and quick actions.</p>
            <p style="margin: 1rem 0;"><a href="app_mockup.html" style="color: #38a169; text-decoration: underline; font-weight: 600;">üì∏ View Introduction Page Demo ‚Üí</a></p>

            <h3>System Status</h3>
            <p>Four key indicators tell you if the system is ready:</p>
            <table>
                <tr>
                    <th>Indicator</th>
                    <th>What It Means</th>
                </tr>
                <tr>
                    <td>‚úÖ Database Connection</td>
                    <td>Connected to Databricks SQL Warehouse</td>
                </tr>
                <tr>
                    <td>‚úÖ Vector Search</td>
                    <td>AI semantic search is available</td>
                </tr>
                <tr>
                    <td>‚úÖ AI Model</td>
                    <td>LLM endpoint is ready for suggestions</td>
                </tr>
                <tr>
                    <td>‚úÖ Configuration</td>
                    <td>All settings are valid</td>
                </tr>
            </table>

            <div class="warning-box">
                <strong>‚ö†Ô∏è Important:</strong> If any status shows an error, contact your administrator before starting mapping work. The system needs all components operational for best results.
            </div>

            <h3>Quick Actions</h3>
            <p>Jump directly to common tasks:</p>
            <ul>
                <li><strong>Start Mapping Fields:</strong> Go to the Field Mapping page</li>
                <li><strong>View Configuration:</strong> (Admin only) Access system settings</li>
            </ul>

            <h3>Help Buttons</h3>
            <p>Access help documentation directly from this page:</p>
            <ul>
                <li><strong>‚ö° Quick Start:</strong> Step-by-step guide for your first mapping</li>
                <li><strong>üìñ User Guide:</strong> This complete guide</li>
                <li><strong>‚öôÔ∏è Admin Guide:</strong> (Admin only) Configuration documentation</li>
            </ul>
        </div>

        <div class="section" id="field-mapping">
            <h2>4. Field Mapping</h2>
            <p>The Field Mapping page is your main workspace. It has three tabs:</p>
            <p style="margin: 1rem 0;"><a href="field_mapping_mockup.html" style="color: #38a169; text-decoration: underline; font-weight: 600;">üì∏ View Field Mapping Demo ‚Üí</a></p>

            <h3>üìã Unmapped Fields Tab</h3>
            <p>Shows all source fields that haven't been mapped yet.</p>
            <ul>
                <li><strong>Search box:</strong> Filter by table name, column name, or description</li>
                <li><strong>Click a row:</strong> Select a field to map</li>
                <li><strong>Selected field details:</strong> View source table, column, datatype, nullable, and comments</li>
                <li><strong>Download Template:</strong> Export unmapped fields as CSV</li>
                <li><strong>Upload Template:</strong> Import mappings from CSV</li>
            </ul>

            <div class="tip-box">
                <strong>üí° Pro Tip:</strong> Fields with good descriptions in the comments column get much better AI suggestions!
            </div>

            <h3>‚úÖ Mapped Fields Tab</h3>
            <p>Shows all completed source-to-target mappings.</p>
            <ul>
                <li><strong>View all mappings:</strong> See source and target table/column pairs</li>
                <li><strong>Search mappings:</strong> Filter by any field</li>
                <li><strong>Delete button (üóëÔ∏è):</strong> Remove a mapping (moves field back to Unmapped)</li>
            </ul>

            <h3>üìä Semantic Table Tab (Admin Only)</h3>
            <p>Manage the target field definitions that AI uses for matching.</p>
            <ul>
                <li><strong>View all target fields:</strong> See complete semantic layer</li>
                <li><strong>Search:</strong> Find specific target fields</li>
                <li><strong>Edit:</strong> Update target field details</li>
                <li><strong>Delete:</strong> Remove target fields</li>
                <li><strong>Bulk Add from CSV:</strong> (Coming soon) Import multiple target fields</li>
            </ul>
        </div>

        <div class="section" id="ai-suggestions">
            <h2>5. AI Mapping Suggestions</h2>
            <p>The AI uses vector search and LLM to find the best target field matches for your source field.</p>
            <p style="margin: 1rem 0;"><a href="field_mapping_mockup.html" style="color: #38a169; text-decoration: underline; font-weight: 600;">üì∏ View AI Suggestions Demo ‚Üí</a></p>

            <h3>How to Use</h3>
            <ol style="margin-left: 2rem;">
                <li>Select an unmapped field from the table</li>
                <li>Review the <strong>AI Configuration</strong> panel:
                    <ul>
                        <li><code>Number of Vector Results: 25</code> - How many candidates to search (default is fine)</li>
                        <li><code>Number of AI Results: 10</code> - How many suggestions to show (default is fine)</li>
                        <li><code>User Feedback:</code> Optional context to guide AI (e.g., "Healthcare claims data")</li>
                    </ul>
                </li>
                <li>Click <strong>ü§ñ Generate AI Mapping Suggestions</strong></li>
                <li>Wait 15-25 seconds for processing</li>
                <li>Review the suggestions table</li>
            </ol>

            <h3>Understanding Results</h3>
            <p>Each suggestion shows:</p>
            <table>
                <tr>
                    <th>Column</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td><strong>Rank</strong></td>
                    <td>Order by confidence (1 = best match)</td>
                </tr>
                <tr>
                    <td><strong>Target Table</strong></td>
                    <td>Target table name</td>
                </tr>
                <tr>
                    <td><strong>Target Column</strong></td>
                    <td>Target column name</td>
                </tr>
                <tr>
                    <td><strong>Confidence</strong></td>
                    <td>AI confidence score (0.0 to 1.0)</td>
                </tr>
                <tr>
                    <td><strong>Reasoning</strong></td>
                    <td>Why this match was suggested</td>
                </tr>
                <tr>
                    <td><strong>Action</strong></td>
                    <td>Select Target button to save mapping</td>
                </tr>
            </table>

            <h3>Confidence Score Guide</h3>
            <ul>
                <li><strong>0.8 - 1.0:</strong> Excellent match! Very reliable ‚≠ê‚≠ê‚≠ê</li>
                <li><strong>0.6 - 0.8:</strong> Good match, review carefully ‚≠ê‚≠ê</li>
                <li><strong>0.4 - 0.6:</strong> Possible match, use your judgment ‚≠ê</li>
                <li><strong>&lt; 0.4:</strong> Weak match, consider manual search instead üîç</li>
            </ul>

            <div class="tip-box">
                <strong>üí° Best Practice:</strong> Always review the reasoning, not just the confidence score. Sometimes lower-confidence matches are actually correct for your specific use case.
            </div>
        </div>

        <div class="section" id="manual-search">
            <h2>6. Manual Search</h2>
            <p>When AI suggestions aren't a good fit, use manual search to browse the semantic table directly.</p>

            <h3>How to Use</h3>
            <ol style="margin-left: 2rem;">
                <li>Select an unmapped field</li>
                <li>Scroll to the <strong>üîç Manual Search</strong> section</li>
                <li>Enter a search term (table name, column name, or keyword)</li>
                <li>Click <strong>üîç Search Semantic Table</strong></li>
                <li>Browse up to 50 results</li>
                <li>Click <strong>Select Target</strong> on the correct field</li>
            </ol>

            <h3>Search Tips</h3>
            <ul>
                <li><strong>Table names:</strong> "patient", "claim", "provider"</li>
                <li><strong>Column names:</strong> "patient_id", "claim_date", "diagnosis_code"</li>
                <li><strong>Keywords:</strong> "identifier", "timestamp", "amount", "code"</li>
                <li><strong>Wildcards:</strong> Search term matches anywhere in table/column/description</li>
            </ul>

            <div class="tip-box">
                <strong>üí° Pro Tip:</strong> Try multiple search terms if you don't find what you need on the first try. Start broad (e.g., "patient") then narrow down (e.g., "patient birth").
            </div>
        </div>

        <div class="section" id="templates">
            <h2>7. Templates & Bulk Operations</h2>
            <p>Use CSV templates to work with multiple fields at once.</p>

            <h3>Download Template</h3>
            <p>Export your unmapped fields to work offline:</p>
            <ol style="margin-left: 2rem;">
                <li>Go to <strong>Unmapped Fields</strong> tab</li>
                <li>Click <strong>üì• Download Template</strong></li>
                <li>Open the CSV file in Excel or similar</li>
                <li>File contains headers + 1 example row with your source field data</li>
            </ol>

            <h3>Upload Template</h3>
            <p>Import mappings you've created in the CSV file:</p>
            <ol style="margin-left: 2rem;">
                <li>Fill in the <code>tgt_table_name</code> and <code>tgt_column_name</code> columns</li>
                <li>Click <strong>üì§ Upload Template</strong></li>
                <li>Select your completed CSV file</li>
                <li>Wait for processing</li>
                <li>Review the success message showing how many fields were mapped</li>
            </ol>

            <div class="warning-box">
                <strong>‚ö†Ô∏è Important:</strong> 
                <ul>
                    <li>Only new mappings are inserted (duplicates are skipped)</li>
                    <li>Make sure target table/column names exist in the semantic table</li>
                    <li>The system automatically refreshes after upload</li>
                </ul>
            </div>

            <h3>CSV Format</h3>
            <p>Required columns in your CSV:</p>
            <ul>
                <li><code>src_table_name</code> - Source table name</li>
                <li><code>src_column_name</code> - Source column name</li>
                <li><code>tgt_table_name</code> - Target table name (fill this in)</li>
                <li><code>tgt_column_name</code> - Target column name (fill this in)</li>
            </ul>
        </div>

        <div class="section" id="best-practices">
            <h2>8. Best Practices</h2>

            <h3>Mapping Strategy</h3>
            <ul>
                <li>‚úÖ <strong>Check system status first:</strong> Ensure all green checkmarks on Introduction page</li>
                <li>‚úÖ <strong>Start with AI suggestions:</strong> They're usually accurate and save time</li>
                <li>‚úÖ <strong>Review confidence scores:</strong> Focus on matches above 0.7</li>
                <li>‚úÖ <strong>Verify data types:</strong> Make sure source and target types are compatible</li>
                <li>‚úÖ <strong>Check nullable constraints:</strong> Ensure nullable settings align</li>
                <li>‚úÖ <strong>Work in logical groups:</strong> Map related fields together for consistency</li>
                <li>‚úÖ <strong>Use manual search for edge cases:</strong> When AI doesn't find good matches</li>
                <li>‚úÖ <strong>Review your work:</strong> Check Mapped Fields tab periodically</li>
            </ul>

            <h3>Quality Tips</h3>
            <ul>
                <li><strong>Add source field descriptions:</strong> Better descriptions = better AI matches</li>
                <li><strong>Use User Feedback:</strong> Guide AI with context about your data domain</li>
                <li><strong>Double-check medical codes:</strong> Diagnosis, procedure, and drug codes need exact matches</li>
                <li><strong>Validate date formats:</strong> Ensure source and target use same format</li>
                <li><strong>Consider business logic:</strong> Technical matches should also make business sense</li>
            </ul>

            <h3>Performance Tips</h3>
            <ul>
                <li><strong>Work in sessions:</strong> Map 10-30 fields per session, then take a break</li>
                <li><strong>Use bulk templates for simple cases:</strong> If you already know the mappings</li>
                <li><strong>Let AI process completely:</strong> Don't refresh during the 15-25 second wait</li>
                <li><strong>Use search filters:</strong> Narrow down large lists before selecting</li>
            </ul>
        </div>

        <div class="section" id="troubleshooting">
            <h2>9. Troubleshooting</h2>

            <h3>Common Issues</h3>
            
            <p><strong>Q: System status shows errors on Introduction page</strong></p>
            <p>A: Contact your administrator. They need to check:</p>
            <ul>
                <li>Database connection (SQL Warehouse running and accessible)</li>
                <li>Vector Search index (deployed and online)</li>
                <li>AI Model endpoint (serving and ready)</li>
                <li>Configuration file (valid and complete)</li>
            </ul>

            <p style="margin-top: 1rem;"><strong>Q: AI suggestions take too long or timeout</strong></p>
            <p>A: This can happen if:</p>
            <ul>
                <li>Vector Search is under heavy load (wait and retry)</li>
                <li>LLM endpoint is cold-starting (first request is slow)</li>
                <li>Try reducing "Number of Vector Results" to 15</li>
            </ul>

            <p style="margin-top: 1rem;"><strong>Q: AI returns no suggestions</strong></p>
            <p>A: Check:</p>
            <ul>
                <li>Vector Search status is green on Introduction page</li>
                <li>Your source field has a description/comment (helps matching)</li>
                <li>Try manual search instead</li>
            </ul>

            <p style="margin-top: 1rem;"><strong>Q: Upload template fails</strong></p>
            <p>A: Verify:</p>
            <ul>
                <li>CSV has required columns (src_table_name, src_column_name, tgt_table_name, tgt_column_name)</li>
                <li>Target table/column names exist in semantic table</li>
                <li>No special characters or line breaks in data</li>
            </ul>

            <p style="margin-top: 1rem;"><strong>Q: Can't see Configuration or Semantic Table tab</strong></p>
            <p>A: These are admin-only features. Check:</p>
            <ul>
                <li>Your badge in the header shows "Admin" (not "User")</li>
                <li>Contact administrator to add you to the admin group</li>
            </ul>

            <p style="margin-top: 1rem;"><strong>Q: Mapped field needs to be changed</strong></p>
            <p>A:</p>
            <ol style="margin-left: 2rem;">
                <li>Go to Mapped Fields tab</li>
                <li>Find the mapping you want to change</li>
                <li>Click the üóëÔ∏è Delete button</li>
                <li>Go back to Unmapped Fields</li>
                <li>Create the correct mapping</li>
            </ol>

            <div class="tip-box">
                <strong>üí° Still Need Help?</strong> Contact your system administrator or Gainwell support team with:
                <ul>
                    <li>Screenshot of the issue</li>
                    <li>What you were trying to do</li>
                    <li>Any error messages you saw</li>
                    <li>Your username and timestamp</li>
                </ul>
            </div>
        </div>

        <div class="section" style="background: linear-gradient(135deg, #e8f4fd, #f0f8ff); border-left-color: #38a169;">
            <h2>üéì Additional Resources</h2>
            <ul>
                <li><strong>‚ö° Quick Start Guide:</strong> Step-by-step tutorial for beginners</li>
                <li><strong>‚öôÔ∏è Admin Guide:</strong> Configuration and management documentation</li>
                <li><strong>üßë‚Äçüíª Developer Guide:</strong> Technical documentation and API reference</li>
            </ul>
            <p style="margin-top: 1rem; font-weight: 500;">Access all guides from the help buttons throughout the application!</p>
        </div>
    </div>
</body>
</html>
