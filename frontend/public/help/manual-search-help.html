<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manual Mapping Help - Smart Mapper V4</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f8f9fa;
            padding: 2rem;
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
        }

        .header {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
            padding: 2.5rem 2rem;
            border-radius: 12px;
            margin-bottom: 2rem;
            text-align: center;
            box-shadow: 0 4px 20px rgba(245, 158, 11, 0.3);
        }

        .header h1 {
            font-size: 2.2rem;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .header p {
            font-size: 1.15rem;
            opacity: 0.95;
        }

        .section {
            background: white;
            margin: 1.5rem 0;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
            border-left: 5px solid #f59e0b;
        }

        .section h2 {
            color: #4a5568;
            margin-bottom: 1rem;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .section h3 {
            color: #4a5568;
            margin: 1.25rem 0 0.75rem 0;
            font-size: 1.15rem;
        }

        .section p {
            margin-bottom: 0.75rem;
            color: #555;
        }

        .section ul, .section ol {
            margin-left: 1.5rem;
            margin-bottom: 1rem;
        }

        .section ul li, .section ol li {
            margin: 0.5rem 0;
            color: #555;
        }

        .tip-box {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            padding: 1.25rem;
            border-radius: 8px;
            margin: 1rem 0;
            border-left: 4px solid #f59e0b;
        }

        .tip-box strong {
            color: #92400e;
            font-size: 1.05rem;
        }

        .info-box {
            background: linear-gradient(135deg, #e0f2fe, #bae6fd);
            padding: 1.25rem;
            border-radius: 8px;
            margin: 1rem 0;
            border-left: 4px solid #0ea5e9;
        }

        .info-box strong {
            color: #0369a1;
            font-size: 1.05rem;
        }

        code {
            background: #f1f1f1;
            padding: 3px 8px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            color: #b45309;
            font-size: 0.9rem;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }

        table th {
            background: #f59e0b;
            color: white;
            padding: 0.75rem;
            text-align: left;
            font-weight: 600;
        }

        table td {
            padding: 0.75rem;
            border-bottom: 1px solid #dee2e6;
        }

        table tr:hover {
            background: #f8f9fa;
        }

        .action-button {
            display: inline-block;
            background: #f59e0b;
            color: white;
            padding: 0.35rem 0.75rem;
            border-radius: 6px;
            font-weight: 500;
            font-size: 0.9rem;
        }

        .status-badge {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .sql-example {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 1rem;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            overflow-x: auto;
            margin: 1rem 0;
        }

        .sql-keyword { color: #569cd6; }
        .sql-string { color: #ce9178; }
        .sql-column { color: #9cdcfe; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>‚úçÔ∏è Manual Mapping Guide</h1>
            <p>Creating mappings when AI can't find a match</p>
        </div>

        <div class="section">
            <h2>ü§î When Do You Need Manual Mapping?</h2>
            <p>Manual mapping is needed when the AI cannot find a suitable suggestion. This happens when:</p>
            
            <ul>
                <li><strong>NO_MATCH status:</strong> No source fields match the target column semantically</li>
                <li><strong>NO_PATTERN status:</strong> No historical mapping exists for this target column</li>
                <li><strong>Complex logic:</strong> The mapping requires custom business logic not captured in patterns</li>
                <li><strong>New field types:</strong> First time mapping a new kind of target field</li>
            </ul>

            <div class="info-box">
                <strong>‚ÑπÔ∏è Good News</strong>
                <p style="margin-top: 0.5rem;">Manual mappings you create become patterns for future AI suggestions! You're training the AI while you work.</p>
            </div>
        </div>

        <div class="section">
            <h2>üìã How to Create a Manual Mapping</h2>
            
            <ol>
                <li>
                    <strong>Find the column with NO_MATCH or NO_PATTERN status</strong>
                    <p>These appear in the suggestion panel with an orange or blue indicator.</p>
                </li>
                <li>
                    <strong>Click <span class="action-button">Create Manual Mapping</span></strong>
                    <p>This opens the mapping editor.</p>
                </li>
                <li>
                    <strong>Select source fields from the palette</strong>
                    <p>Browse your uploaded source tables and click fields to add them to your SQL.</p>
                </li>
                <li>
                    <strong>Write the SQL expression</strong>
                    <p>Create the SELECT statement that transforms source data to the target column.</p>
                </li>
                <li>
                    <strong>Save and approve</strong>
                    <p>Click "Save & Approve" to create the mapping.</p>
                </li>
            </ol>
        </div>

        <div class="section">
            <h2>üíª Writing SQL Expressions</h2>
            
            <h3>Simple Column Mapping</h3>
            <p>For straightforward 1-to-1 mappings:</p>
            <div class="sql-example">
                <span class="sql-keyword">SELECT</span> <span class="sql-column">RECIP_BASE.FIRST_NAME</span> <span class="sql-keyword">AS</span> <span class="sql-column">MEMBER_FIRST_NM</span>
            </div>

            <h3>With Transformation</h3>
            <p>Apply SQL functions to clean or format data:</p>
            <div class="sql-example">
                <span class="sql-keyword">SELECT</span> <span class="sql-keyword">TRIM</span>(<span class="sql-keyword">INITCAP</span>(<span class="sql-column">RECIP_BASE.FIRST_NAME</span>)) <span class="sql-keyword">AS</span> <span class="sql-column">MEMBER_FIRST_NM</span>
            </div>

            <h3>Concatenation</h3>
            <p>Combine multiple source fields:</p>
            <div class="sql-example">
                <span class="sql-keyword">SELECT</span> <span class="sql-keyword">CONCAT</span>(<span class="sql-column">FIRST_NAME</span>, <span class="sql-string">' '</span>, <span class="sql-column">LAST_NAME</span>) <span class="sql-keyword">AS</span> <span class="sql-column">FULL_NAME</span>
            </div>

            <h3>With JOINs</h3>
            <p>For complex mappings involving multiple tables:</p>
            <div class="sql-example">
                <span class="sql-keyword">SELECT DISTINCT</span><br>
                &nbsp;&nbsp;<span class="sql-column">b.STREET_ADDR_1</span> <span class="sql-keyword">AS</span> <span class="sql-column">ADDR_1_TXT</span><br>
                <span class="sql-keyword">FROM</span> <span class="sql-column">RECIP_BASE</span> <span class="sql-column">b</span><br>
                <span class="sql-keyword">JOIN</span> <span class="sql-column">silver.mbr_fndtn</span> <span class="sql-column">mf</span> <span class="sql-keyword">ON</span> <span class="sql-column">b.RECIP_KEY</span> = <span class="sql-column">mf.SRC_KEY_ID</span><br>
                <span class="sql-keyword">WHERE</span> <span class="sql-column">b.CURRENT_IND</span> = <span class="sql-string">'Y'</span>
            </div>

            <div class="tip-box">
                <strong>üí° Silver Tables Are Constant</strong>
                <p style="margin-top: 0.5rem;">Tables with "silver" in their path are reference tables that don't change between projects. Use them in JOINs but don't try to map their columns.</p>
            </div>
        </div>

        <div class="section">
            <h2>üé® Using the SQL Editor</h2>
            
            <h3>Source Field Palette</h3>
            <p>The left panel shows all your uploaded source fields organized by table:</p>
            <ul>
                <li>Click a table name to expand/collapse its columns</li>
                <li>Click any column to insert it into your SQL at the cursor position</li>
                <li>Green highlighting shows columns that are already matched</li>
                <li>Use the filter box to search for specific columns</li>
            </ul>

            <h3>SQL Preview</h3>
            <p>The preview panel shows your SQL with syntax highlighting:</p>
            <ul>
                <li><strong>Blue:</strong> SQL keywords (SELECT, FROM, WHERE, etc.)</li>
                <li><strong>Green:</strong> String literals</li>
                <li><strong>Yellow highlight:</strong> Problem fields that need attention</li>
            </ul>

            <h3>AI Assist</h3>
            <p>Click the <span class="action-button" style="background: #6366f1;">‚ö° AI Assist</span> button for help:</p>
            <ul>
                <li>Describe what you need in natural language</li>
                <li>AI will suggest SQL modifications</li>
                <li>Review and apply the suggestions</li>
            </ul>
        </div>

        <div class="section">
            <h2>üìä Common Patterns</h2>
            
            <table>
                <tr>
                    <th>Pattern Type</th>
                    <th>When to Use</th>
                    <th>Example</th>
                </tr>
                <tr>
                    <td><strong>SINGLE</strong></td>
                    <td>Direct 1-to-1 column mapping</td>
                    <td>SOURCE.FIELD ‚Üí TARGET.FIELD</td>
                </tr>
                <tr>
                    <td><strong>TRANSFORM</strong></td>
                    <td>Data needs formatting/cleaning</td>
                    <td>TRIM(UPPER(field))</td>
                </tr>
                <tr>
                    <td><strong>CONCAT</strong></td>
                    <td>Multiple fields combine into one</td>
                    <td>First + ' ' + Last ‚Üí Full Name</td>
                </tr>
                <tr>
                    <td><strong>JOIN</strong></td>
                    <td>Data from multiple tables</td>
                    <td>Source A joined to Reference B</td>
                </tr>
                <tr>
                    <td><strong>CASE/WHEN</strong></td>
                    <td>Conditional logic needed</td>
                    <td>Code translations, status mapping</td>
                </tr>
                <tr>
                    <td><strong>HARDCODED</strong></td>
                    <td>Fixed value always used</td>
                    <td>SELECT 'ACTIVE' AS STATUS</td>
                </tr>
            </table>
        </div>

        <div class="section">
            <h2>‚úÖ Best Practices</h2>
            
            <ul>
                <li><strong>Start simple:</strong> Get the basic mapping working first, then add complexity</li>
                <li><strong>Test your SQL:</strong> Run it against sample data if possible</li>
                <li><strong>Use table aliases:</strong> Makes SQL more readable (e.g., <code>FROM RECIP_BASE b</code>)</li>
                <li><strong>Add DISTINCT:</strong> Prevents duplicate rows in many cases</li>
                <li><strong>Document complex logic:</strong> Use the notes field to explain business rules</li>
                <li><strong>Check data types:</strong> Ensure source and target types are compatible</li>
            </ul>

            <div class="tip-box">
                <strong>üí° Building Patterns</strong>
                <p style="margin-top: 0.5rem;">Every manual mapping you create becomes a pattern. Write clear, reusable SQL and future projects will benefit from AI suggestions based on your work!</p>
            </div>
        </div>

        <div class="section" style="background: linear-gradient(135deg, #fef3c7, #fffbeb); border-left-color: #f59e0b;">
            <h2>üöÄ Quick Reference</h2>
            <table>
                <tr>
                    <th>Action</th>
                    <th>How</th>
                </tr>
                <tr>
                    <td>Insert source field</td>
                    <td>Click field in left palette</td>
                </tr>
                <tr>
                    <td>Get AI help</td>
                    <td>Click "AI Assist" button</td>
                </tr>
                <tr>
                    <td>Copy SQL</td>
                    <td>Click copy icon in SQL header</td>
                </tr>
                <tr>
                    <td>Filter source fields</td>
                    <td>Type in filter box above palette</td>
                </tr>
                <tr>
                    <td>Save mapping</td>
                    <td>Click "Save & Approve"</td>
                </tr>
            </table>
            
            <p style="margin-top: 1.5rem; text-align: center; color: #666;">
                <strong>Version:</strong> Smart Mapper V4 | <strong>Feature:</strong> Manual Mapping
            </p>
        </div>
    </div>
</body>
</html>
