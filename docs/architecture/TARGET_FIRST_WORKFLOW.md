# Target-First Mapping Workflow

## Overview

The Target-First workflow inverts the traditional mapping approach:
- **Traditional**: Select source field â†’ Find target â†’ Configure mapping
- **Target-First**: Select target table â†’ AI finds best sources for ALL columns â†’ Review & approve

This approach is more efficient for large-scale migrations where you need to map entire target tables.

---

## Entity Relationship Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           V4 SCHEMA: TARGET-FIRST WORKFLOW                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                                   â”‚
â”‚  â”‚ mapping_projects â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚                  â”‚                                               â”‚                   â”‚
â”‚  â”‚ project_id (PK)  â”‚                                               â”‚                   â”‚
â”‚  â”‚ project_name     â”‚                                               â”‚                   â”‚
â”‚  â”‚ project_status   â”‚                                               â”‚                   â”‚
â”‚  â”‚ source_system    â”‚                                               â”‚                   â”‚
â”‚  â”‚ target_domain    â”‚                                               â”‚                   â”‚
â”‚  â”‚ progress_stats   â”‚                                               â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                               â”‚                   â”‚
â”‚           â”‚ 1                                                       â”‚                   â”‚
â”‚           â”‚                                                         â”‚                   â”‚
â”‚           â”‚ has many                                                â”‚                   â”‚
â”‚           â”‚                                                         â”‚                   â”‚
â”‚           â–¼ *                                                       â”‚                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚                   â”‚
â”‚  â”‚ target_table_status  â”‚           â”‚  unmapped_fields    â”‚        â”‚                   â”‚
â”‚  â”‚                      â”‚           â”‚                     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚  â”‚ target_table_        â”‚           â”‚ unmapped_field_id   â”‚   project_id               â”‚
â”‚  â”‚   status_id (PK)     â”‚           â”‚ src_table_name      â”‚                            â”‚
â”‚  â”‚ project_id (FK)      â”‚           â”‚ src_column_name     â”‚                            â”‚
â”‚  â”‚ tgt_table_physical   â”‚           â”‚ src_comments        â”‚                            â”‚
â”‚  â”‚ mapping_status       â”‚           â”‚ project_id (FK)     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ total_columns        â”‚           â”‚ mapping_status      â”‚          â”‚                 â”‚
â”‚  â”‚ columns_mapped       â”‚           â”‚ source_semantic_    â”‚          â”‚                 â”‚
â”‚  â”‚ columns_pending      â”‚           â”‚   field (vector)    â”‚          â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚                 â”‚
â”‚           â”‚ 1                                   â–²                    â”‚                 â”‚
â”‚           â”‚                                     â”‚ vector search      â”‚                 â”‚
â”‚           â”‚ has many                            â”‚ matches            â”‚                 â”‚
â”‚           â”‚                                     â”‚                    â”‚                 â”‚
â”‚           â–¼ *                                   â”‚                    â”‚                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚                    â”‚                 â”‚
â”‚  â”‚  mapping_suggestions   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚                 â”‚
â”‚  â”‚                        â”‚   matched_source_fields                  â”‚                 â”‚
â”‚  â”‚ suggestion_id (PK)     â”‚                                          â”‚                 â”‚
â”‚  â”‚ project_id (FK)        â”‚                                          â”‚                 â”‚
â”‚  â”‚ target_table_          â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚                 â”‚
â”‚  â”‚   status_id (FK)       â”‚     â”‚   semantic_fields    â”‚             â”‚                 â”‚
â”‚  â”‚ semantic_field_id (FK) â”‚â—„â”€â”€â”€â”€â”‚                      â”‚             â”‚                 â”‚
â”‚  â”‚ tgt_column_physical    â”‚     â”‚ semantic_field_id    â”‚             â”‚                 â”‚
â”‚  â”‚ pattern_type           â”‚     â”‚ tgt_table_name       â”‚             â”‚                 â”‚
â”‚  â”‚ pattern_sql            â”‚     â”‚ tgt_column_name      â”‚             â”‚                 â”‚
â”‚  â”‚ suggested_sql          â”‚     â”‚ tgt_comments         â”‚             â”‚                 â”‚
â”‚  â”‚ confidence_score       â”‚     â”‚ semantic_field       â”‚             â”‚                 â”‚
â”‚  â”‚ suggestion_status      â”‚     â”‚   (vector)           â”‚             â”‚                 â”‚
â”‚  â”‚ matched_source_fields  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                          â”‚                 â”‚
â”‚           â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚                 â”‚
â”‚           â”‚ when approved           â”‚   mapped_fields      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚           â”‚ creates                 â”‚   (past patterns)    â”‚   project_id (new)        â”‚
â”‚           â”‚                         â”‚                      â”‚                            â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ mapped_field_id      â”‚                            â”‚
â”‚             created_mapped_field_id â”‚ source_expression    â”‚                            â”‚
â”‚                                     â”‚ join_metadata        â”‚                            â”‚
â”‚                                     â”‚ source_semantic_     â”‚                            â”‚
â”‚                                     â”‚   field (vector)     â”‚                            â”‚
â”‚                                     â”‚ project_id (FK)      â”‚                            â”‚
â”‚                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Workflow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           TARGET-FIRST MAPPING WORKFLOW                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ STEP 1: CREATE PROJECT & UPLOAD SOURCES                                             â”‚â”‚
â”‚  â”‚                                                                                      â”‚â”‚
â”‚  â”‚  User creates project: "DMES Member Migration"                                      â”‚â”‚
â”‚  â”‚  User uploads source fields (CSV or catalog scan)                                   â”‚â”‚
â”‚  â”‚  â†’ Source fields stored in unmapped_fields with project_id                          â”‚â”‚
â”‚  â”‚                                                                                      â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚â”‚
â”‚  â”‚  â”‚ unmapped_fields                                                        â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”‚ my_member_base   â”‚ MBR_KEY       â”‚ "Member surrogate key"         â”‚ â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”‚ my_member_base   â”‚ ADDR_LINE_1   â”‚ "Primary street address"       â”‚ â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”‚ my_member_base   â”‚ CTY_CODE      â”‚ "County FIPS code"             â”‚ â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”‚ my_member_addr   â”‚ MBR_KEY       â”‚ "Member key reference"         â”‚ â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”‚ my_member_addr   â”‚ STREET_1      â”‚ "Street address line 1"        â”‚ â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”‚ my_member_addr   â”‚ ADDR_TYPE     â”‚ "Address type (R/M)"           â”‚ â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚         â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                          â”‚                                               â”‚
â”‚                                          â–¼                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ STEP 2: INITIALIZE TARGET TABLES                                                    â”‚â”‚
â”‚  â”‚                                                                                      â”‚â”‚
â”‚  â”‚  System queries semantic_fields for target tables (filtered by domain)              â”‚â”‚
â”‚  â”‚  Creates target_table_status rows for each table                                    â”‚â”‚
â”‚  â”‚                                                                                      â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚â”‚
â”‚  â”‚  â”‚ target_table_status                                                    â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”‚ Table                    â”‚ Status     â”‚ Cols   â”‚ Progress         â”‚ â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”‚ MBR_CNTCT (Member        â”‚ NOT_STARTEDâ”‚   25   â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0%   â”‚ â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”‚   Contact)               â”‚            â”‚        â”‚                  â”‚ â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”‚ MBR_FNDTN (Member        â”‚ NOT_STARTEDâ”‚   18   â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0%   â”‚ â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”‚   Foundation)            â”‚            â”‚        â”‚                  â”‚ â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”‚ MBR_ENRL_FNDTN (Enroll)  â”‚ NOT_STARTEDâ”‚   32   â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0%   â”‚ â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚         â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                          â”‚                                               â”‚
â”‚                                          â–¼                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ STEP 3: USER SELECTS TABLE TO MAP                                                   â”‚â”‚
â”‚  â”‚                                                                                      â”‚â”‚
â”‚  â”‚  User clicks "Map Table" on MBR_CNTCT                                               â”‚â”‚
â”‚  â”‚  Status changes to DISCOVERING                                                       â”‚â”‚
â”‚  â”‚  Async job starts to generate suggestions for ALL columns                           â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                          â”‚                                               â”‚
â”‚                                          â–¼                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ STEP 4: AI GENERATES SUGGESTIONS (ASYNC)                                            â”‚â”‚
â”‚  â”‚                                                                                      â”‚â”‚
â”‚  â”‚  FOR EACH target column in MBR_CNTCT:                                               â”‚â”‚
â”‚  â”‚                                                                                      â”‚â”‚
â”‚  â”‚    1. Find past pattern from mapped_fields                                          â”‚â”‚
â”‚  â”‚       â†’ Get SQL template + join_metadata                                            â”‚â”‚
â”‚  â”‚                                                                                      â”‚â”‚
â”‚  â”‚    2. Vector search unmapped_fields for matching source columns                     â”‚â”‚
â”‚  â”‚       â†’ Match by description similarity                                             â”‚â”‚
â”‚  â”‚                                                                                      â”‚â”‚
â”‚  â”‚    3. LLM rewrites SQL with user's source columns                                   â”‚â”‚
â”‚  â”‚       â†’ Silver tables stay constant                                                 â”‚â”‚
â”‚  â”‚       â†’ Bronze tables/columns replaced                                              â”‚â”‚
â”‚  â”‚                                                                                      â”‚â”‚
â”‚  â”‚    4. Store in mapping_suggestions                                                  â”‚â”‚
â”‚  â”‚       â†’ suggested_sql, matched_source_fields, confidence                            â”‚â”‚
â”‚  â”‚                                                                                      â”‚â”‚
â”‚  â”‚  Status changes to SUGGESTIONS_READY                                                â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                          â”‚                                               â”‚
â”‚                                          â–¼                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ STEP 5: USER REVIEWS SUGGESTIONS                                                    â”‚â”‚
â”‚  â”‚                                                                                      â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚â”‚
â”‚  â”‚  â”‚ MBR_CNTCT Column Mapping Review                    [Approve All High]  â”‚         â”‚â”‚
â”‚  â”‚  â”‚                                                                        â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”‚ âœ… ADDR_1_TXT (First address line)              Confidence: 94%  â”‚  â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”‚    Pattern: UNION_WITH_JOINS                                     â”‚  â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”‚    Sources: my_member_base.ADDR_LINE_1, my_member_addr.STREET_1  â”‚  â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”‚    [View SQL â–¼]                                                  â”‚  â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”‚    â”‚ SELECT DISTINCT                                          â”‚  â”‚  â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”‚    â”‚   INITCAP(b.ADDR_LINE_1) AS ADDR_1_TXT    â—„â”€â”€ CHANGED    â”‚  â”‚  â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”‚    â”‚ FROM my_member_base b                      â—„â”€â”€ CHANGED    â”‚  â”‚  â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”‚    â”‚ JOIN silver.mbr_fndtn mf ON b.MBR_KEY = mf.SRC_KEY_ID    â”‚  â”‚  â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”‚    â”‚ ...                                                      â”‚  â”‚  â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”‚    [âœ“ Approve] [âœ Edit] [âœ— Reject]                              â”‚  â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚         â”‚â”‚
â”‚  â”‚  â”‚                                                                        â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”‚ âš ï¸ CNTCT_TYP_CD (Contact type code)             Confidence: 62%  â”‚  â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”‚    Warning: Filter values may need adjustment                    â”‚  â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”‚    ...                                                           â”‚  â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚         â”‚â”‚
â”‚  â”‚  â”‚                                                                        â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”‚ â“ CNTRY_CD (Country code)                      No Pattern Found  â”‚  â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”‚    No past mapping pattern. [Create Manual Mapping]              â”‚  â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚         â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                          â”‚                                               â”‚
â”‚                                          â–¼                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ STEP 6: USER APPROVES/EDITS MAPPINGS                                                â”‚â”‚
â”‚  â”‚                                                                                      â”‚â”‚
â”‚  â”‚  For each approved mapping:                                                         â”‚â”‚
â”‚  â”‚  â†’ Create row in mapped_fields with project_id                                      â”‚â”‚
â”‚  â”‚  â†’ Update suggestion_status to APPROVED/EDITED                                      â”‚â”‚
â”‚  â”‚  â†’ Update unmapped_fields status to MAPPED                                          â”‚â”‚
â”‚  â”‚  â†’ Increment columns_mapped counter                                                 â”‚â”‚
â”‚  â”‚                                                                                      â”‚â”‚
â”‚  â”‚  When all columns mapped/skipped:                                                   â”‚â”‚
â”‚  â”‚  â†’ target_table_status changes to COMPLETE                                          â”‚â”‚
â”‚  â”‚  â†’ Project counters updated                                                         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                          â”‚                                               â”‚
â”‚                                          â–¼                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ MAIN DASHBOARD                                                                       â”‚â”‚
â”‚  â”‚                                                                                      â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚â”‚
â”‚  â”‚  â”‚ DMES Member Migration                                                  â”‚         â”‚â”‚
â”‚  â”‚  â”‚                                                                        â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”‚    Tables    â”‚  â”‚   Columns    â”‚  â”‚   Pending    â”‚  â”‚  Avg Conf   â”‚ â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”‚    3 / 12    â”‚  â”‚   45 / 156   â”‚  â”‚     23       â”‚  â”‚    87%      â”‚ â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”‚    â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘  â”‚  â”‚   â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘   â”‚  â”‚              â”‚  â”‚             â”‚ â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”‚     25%      â”‚  â”‚     29%      â”‚  â”‚   Review â†’   â”‚  â”‚             â”‚ â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚         â”‚â”‚
â”‚  â”‚  â”‚                                                                        â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”‚ Table                    â”‚ Status          â”‚ Progress             â”‚ â”‚â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”‚ âœ… MBR_CNTCT             â”‚ COMPLETE        â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%      â”‚ â”‚â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”‚ ğŸ”„ MBR_FNDTN             â”‚ IN_PROGRESS     â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘  70%      â”‚ â”‚â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”‚ â³ MBR_ENRL_FNDTN        â”‚ SUGGESTIONS_    â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   0%      â”‚ â”‚â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”‚                          â”‚   READY         â”‚ [Review â†’]           â”‚ â”‚â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”‚ â¬œ CASE                  â”‚ NOT_STARTED     â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   0%      â”‚ â”‚â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â”‚                          â”‚                 â”‚ [Start Mapping]      â”‚ â”‚â”‚         â”‚â”‚
â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚         â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Database Tables Summary

### New Tables

| Table | Purpose |
|-------|---------|
| `mapping_projects` | Track overall mapping projects with progress stats |
| `target_table_status` | Track per-table mapping progress and AI job status |
| `mapping_suggestions` | Store AI suggestions before user approval |

### Modified Tables

| Table | Change |
|-------|--------|
| `unmapped_fields` | Add `project_id` to link source fields to project |
| `mapped_fields` | Add `project_id` to link new mappings to project |

### Views

| View | Purpose |
|------|---------|
| `v_project_dashboard` | Aggregated stats for main dashboard |
| `v_target_table_progress` | Per-table progress details |
| `v_suggestion_review` | Suggestions pending review |

---

## Key Design Decisions

### 1. Async AI Processing
- When user clicks "Map Table", suggestions are generated asynchronously
- User can continue to other tables while AI processes
- Status shows: DISCOVERING â†’ SUGGESTIONS_READY â†’ IN_PROGRESS â†’ COMPLETE

### 2. Suggestions vs Mappings
- **Suggestions** are stored separately until approved
- Allows user to review, edit, reject before creating final mapping
- Rejected suggestions inform future AI (via mapping_feedback)

### 3. Pattern Reuse
- Historical mappings (NULL project_id) serve as patterns
- New project mappings (with project_id) don't affect patterns until verified

### 4. Progress Tracking
- Denormalized counters on project and table for fast dashboard queries
- Counters updated on each approval/rejection

### 5. Silver Table Constants
- AI recognizes silver tables (from schema prefix or reference list)
- Silver tables and their columns are never replaced in SQL rewriting

---

## API Endpoints Needed

```
POST   /api/v4/projects                     Create new project
GET    /api/v4/projects                     List all projects
GET    /api/v4/projects/{id}                Get project with stats
PUT    /api/v4/projects/{id}                Update project

POST   /api/v4/projects/{id}/source-fields  Upload source fields
GET    /api/v4/projects/{id}/source-fields  Get source fields for project

GET    /api/v4/projects/{id}/tables         Get target tables with status
POST   /api/v4/projects/{id}/tables/{table}/discover   Start AI discovery
GET    /api/v4/projects/{id}/tables/{table}/suggestions Get suggestions

POST   /api/v4/suggestions/{id}/approve     Approve suggestion
POST   /api/v4/suggestions/{id}/edit        Edit and approve
POST   /api/v4/suggestions/{id}/reject      Reject suggestion
POST   /api/v4/suggestions/{id}/skip        Skip column

GET    /api/v4/dashboard                    Get dashboard stats
```

---

## Next Steps

1. **Run V4_TARGET_FIRST_SCHEMA.sql** to create new tables
2. **Load historical mappings** with join_metadata (from BR Scenario CSV)
3. **Create FastAPI endpoints** for the new workflow
4. **Create Vue.js components**:
   - ProjectDashboard.vue
   - TargetTableList.vue
   - SuggestionReviewView.vue
   - SQLDiffViewer.vue
5. **Implement AI suggestion service** with async processing

